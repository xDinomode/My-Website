var map,block,spikes,platform,platform2,platform3,platform4,platform5,platform6,platform7,platform8,platform9,platform10,platformYvel=200,platformXvel=200,platform2Yvel=200,platform4Xvel=250,platform5Xvel=250,platform6Yvel=150,platform7Yvel=400,santaHead,santaHeadX=384,santaHeadY=384,santaBody,santaBodyX=santaHeadX,santaBodyY=santaHeadY+30,santaLegs,santaLegsX=santaHeadX,santaLegsY=santaHeadY+60,music,Play={preload:function(){game.load.tilemap("map","/images/game/bluecrosstile4.json",null,Phaser.Tilemap.TILED_JSON),game.load.image("tiles","/images/game/tileset.png"),game.load.image("santaHead","/images/game/headS.png"),game.load.image("santaBody","/images/game/bodyS.png"),game.load.image("santaLegs","/images/game/wheelS.png"),game.load.image("block","/images/testitle.jpg"),game.load.audio("kylabyte",["/audio/kilabyte.mp3","/audio/kilabyte.ogg"])},create:function(){game.stage.backgroundColor="#81879D",music=game.add.audio("kylabyte"),cursors=game.input.keyboard.createCursorKeys(),game.physics.startSystem(Phaser.Physics.P2JS),map=game.add.tilemap("map"),map.addTilesetImage("tileset","tiles"),block=map.createLayer("Tile Layer 1"),block.resizeWorld(),map.setCollisionBetween(0,1),game.physics.p2.convertTilemap(map,block),spikes=map.createLayer("spikes"),spikes.resizeWorld(),sign=map.createLayer("sign"),sign.resizeWorld(),santaBody=game.add.sprite(santaBodyX,santaBodyY,"santaBody"),santaBody.anchor.setTo(.5),santaBody.scale.setTo(.15),santaHead=game.add.sprite(santaHeadX,santaHeadY,"santaHead"),santaHead.anchor.setTo(.5),santaHead.scale.setTo(.15),santaLegs=game.add.sprite(santaLegsX,santaLegsY,"santaLegs"),santaLegs.anchor.setTo(.5),santaLegs.scale.setTo(.15),platform=game.add.sprite(960,384,"block"),platform2=game.add.sprite(2112,576,"block"),platform3=game.add.sprite(1984,1472,"block"),platform4=game.add.sprite(704,2112,"block"),platform5=game.add.sprite(1088,2112,"block"),platform6=game.add.sprite(1728,2112,"block"),platform7=game.add.sprite(1856,2368,"block"),platform8=game.add.sprite(2240,2112,"block"),platform9=game.add.sprite(2496,2112,"block"),game.physics.p2.enable([santaLegs,santaBody,santaHead,platform,platform2,platform3,platform4,platform5,platform6,platform7,platform8,platform9],!1);game.physics.p2.createSpring(santaLegs,santaBody,1,200,1),game.physics.p2.createSpring(santaBody,santaHead,1,200,1);santaLegs.body.clearShapes(),santaLegs.body.setCircle(15),game.physics.p2.gravity.y=700,game.physics.p2.restitution=.01,santaBody.body.fixedRotation=!0,santaHead.body.fixedRotation=!0,platform.body.kinematic=!0,platform.body.setRectangleFromSprite(),platform2.body.kinematic=!0,platform2.body.setRectangleFromSprite(),platform3.body.kinematic=!0,platform3.body.setRectangleFromSprite(),platform4.body.kinematic=!0,platform4.body.setRectangleFromSprite(),platform5.body.kinematic=!0,platform5.body.setRectangleFromSprite(),platform6.body.kinematic=!0,platform6.body.setRectangleFromSprite(),platform7.body.kinematic=!0,platform7.body.setRectangleFromSprite(),platform8.body["static"]=!0,platform8.body.motionState=Phaser.Physics.P2.Body.DYNAMIC,platform8.body["static"]=!0,platform8.body.setRectangleFromSprite(),platform9.body.motionState=Phaser.Physics.P2.Body.DYNAMIC,platform9.body["static"]=!0,platform9.body.setRectangleFromSprite(),game.camera.follow(santaBody),music.play(),music.volume-=.5},update:function(){platform.body.velocity.y=platformYvel,platform2.body.velocity.y=platform2Yvel,platform3.body.velocity.x=platformXvel,platform4.body.velocity.x=platform4Xvel,platform5.body.velocity.x=platform5Xvel,platform6.body.velocity.y=platform6Yvel,platform7.body.velocity.y=platform7Yvel,platform8.body.rotateRight(50),platform9.body.rotateRight(100),platform.y>832?platformYvel=-200:platform.y<448&&(platformYvel=200),platform2.y>832?platform2Yvel=-200:platform2.y<448&&(platform2Yvel=200),platform3.x<1472?platformXvel=200:platform3.x>1984&&(platformXvel=-200),platform4.x<704?platform4Xvel=250:platform4.x>960&&(platform.x=960,platform4Xvel=-250),platform5.x<1024?platform5Xvel=250:platform5.x>1344&&(platform.x=1344,platform5Xvel=-250),platform6.y>2496?platform6Yvel=-150:platform6.y<2112&&(platform6Yvel=150),platform7.y>2496?platform7Yvel=-500:platform7.y<2112&&(platform7Yvel=500),santaLegs.body.velocity.x=0,santaHead.body.velocity.x=0,santaBody.body.velocity.x=0,cursors.right.isDown?(santaLegs.body.rotateRight(250),santaBody.body.moveRight(370),santaLegs.body.moveRight(370),santaHead.body.moveRight(370)):cursors.left.isDown?(santaLegs.body.rotateLeft(250),santaLegs.body.moveLeft(370),santaBody.body.moveLeft(370),santaHead.body.moveLeft(370)):cursors.down.isDown&&(game.camera.y+=10)}};